<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administração</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
	<!-- Navbar Principal -->
			    <nav class="navbar navbar-expand-lg main-navbar">
			      <div class="container-fluid">
					
					<!-- LOGO -->
					   <a class="navbar-brand text-white fw-bold" href="/">TCHOMP</a>

					   <!-- BOTÃO TOGGLER (MOBILE) -->
					   <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain" aria-controls="navbarMain" aria-expanded="false" aria-label="Toggle navigation">
					     <span class="navbar-toggler-icon"></span>
					   </button>

			        <!-- Links centralizados + barra de pesquisa -->
			        <div class="collapse navbar-collapse justify-content-center" id="navbarMain">
			          <div class="navbar-nav mx-auto d-flex justify-content-center">
			            <a class="nav-link" th:href="@{/inicial}">Página Inicial</a>
			            <a class="nav-link" th:href="@{/restaurantes}">Restaurantes</a>
			            <a class="nav-link" th:href="@{/perfil}">Perfil</a>
			            <a class="nav-link" th:href="@{/adm}">Administração</a>
			            <a class="nav-link" th:href="@{/sobre}">Sobre</a>
			          </div>
					  
					  <!-- Botão Favoritos -->
					  <a th:href="@{/favoritos}" class="btn btn-favorite ms-3">
					      <i class="bi bi-heart me-1"></i> Favoritos
					  </a>

			          <!-- Barra de pesquisa estilizada -->
			          <form class="d-flex ms-3 search-box" th:action="@{/buscar}" method="get">
			            <input class="form-control" type="search" placeholder="Buscar..." aria-label="Search" name="q">
			            <button class="btn btn-search" type="submit">
			              <i class="bi bi-search"></i>
			            </button>
			          </form>
					  <!-- Botão Sair -->
					  <a href="/logout" class="btn btn-logout ms-3">
					      <i class="bi bi-box-arrow-right me-1"></i> Sair
					  </a>
			        </div>
			      </div>
			    </nav>
    </nav>

    <div class="container my-5">
        <h2 class="text-center mb-4">Administração do Sistema</h2>

        <!-- Controle de Restaurantes -->
        <section class="mb-5">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h3>Restaurantes</h3>
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalRestaurante">Adicionar Restaurante</button>
            </div>
            <table class="table table-striped table-hover bg-light rounded shadow-sm">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Horário</th>
                        <th>Culinária</th>
                        <th>Tipos de Prato</th>
						<th>Cidade</th>
                        <th>Endereço</th>
                        <th>Site</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Exemplo com Thymeleaf -->
                    <tr th:each="restaurante : ${restaurantes}">
                        <td th:text="${restaurante.nome}"></td>
                        <td th:text="${restaurante.horario}"></td>
                        <td th:text="${restaurante.culinaria}"></td>
                        <td th:text="${restaurante.tiposPrato}"></td>
						<td th:text="${restaurante.cidade}"></td>
                        <td th:text="${restaurante.endereco}"></td>
                        <td><a th:href="${restaurante.site}" target="_blank">Site</a></td>
                        <td>
                            <button class="btn btn-sm btn-warning">Editar</button>
                            <button class="btn btn-sm btn-danger">Excluir</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Controle de Usuários -->
        <section>
            <h3>Usuários</h3>
            <table class="table table-striped table-hover bg-light rounded shadow-sm">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Email</th>
                        <th>Administrador</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="user : ${usuarios}">
                        <td th:text="${user.nome}"></td>
                        <td th:text="${user.email}"></td>
                        <td>
                            <input type="checkbox" th:checked="${user.adm}" th:data-userid="${user.id}" class="toggle-adm">
                        </td>
                        <td>
                            <button class="btn btn-sm btn-danger">Excluir</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
    </div>

    <!-- Modal Restaurante -->
	<form id="formRestaurante" method="post" th:action="@{/restauranteCadastrar}">
	  <div class="modal fade" id="modalRestaurante" tabindex="-1">
	    <div class="modal-dialog">
	      <div class="modal-content">
	        <div class="modal-header">
	          <h5 class="modal-title">Adicionar / Editar Restaurante</h5>
	          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
	        </div>
	        <div class="modal-body">
	          <input class="form-control mb-2" type="text" name="nome" placeholder="Nome" required>
	          <input class="form-control mb-2" type="text" name="horario" placeholder="Horário de funcionamento" required>
	          <input class="form-control mb-2" type="text" name="culinaria" placeholder="Culinária" required>
	          <input class="form-control mb-2" type="text" name="cidade" placeholder="Cidade" required>
	          <div class="mb-2">
	            <label>Tipos de prato:</label><br>
	            <input type="checkbox" name="tipodePrato" value="Rodízio"> Rodízio
	            <input type="checkbox" name="tipodePrato" value="Self Service"> Self Service
	            <input type="checkbox" name="tipodePrato" value="A la Carte"> A la Carte
	          </div>
	          <input class="form-control mb-2" type="text" name="endereco" placeholder="Endereço" required>
	          <input class="form-control mb-2" type="url" name="site" placeholder="Site">
	          <button class="btn btn-primary w-100" type="submit">Salvar</button>
	        </div>
	      </div>
	    </div>
	  </div>
	</form>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
